<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Almoxarifado • v7.8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- CSS do site branco -->
  <link rel="stylesheet" href="style.css" />

  <!-- jsPDF para geração de PDFs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="app-shell">

    <!-- ================= LOGIN ================= -->
    <section id="view-login" class="view">
      <div class="page-center">
        <div class="card card-login">
          <h1 class="title-main">Almoxarifado • v7.8</h1>
          <p class="muted">Informe usuário e senha para entrar.</p>

          <div class="form-group">
            <label for="login-user">Usuário</label>
            <input id="login-user" class="inp" type="text" placeholder="admin / almox / sol" />
          </div>

          <div class="form-group">
            <label for="login-pass">Senha</label>
            <input id="login-pass" class="inp" type="password" placeholder="senha" />
          </div>

          <div id="login-err" class="muted error hidden">
            Usuário ou senha inválidos.
          </div>

          <div class="actions-row">
            <button id="btn-login" class="btn">Entrar</button>
            <button id="btn-wipe" class="btn2" type="button" title="Limpar dados locais deste navegador">
              Limpar este navegador
            </button>
          </div>

          <div class="muted small">
            Logins padrão:<br />
            <b>admin/admin</b> • <b>almox/almox</b> • <b>sol/sol</b>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= APP ================= -->
    <section id="view-app" class="view hidden">
      <!-- Cabeçalho -->
      <header class="topbar">
        <div class="topbar-left">
          <div class="logo-circle">A</div>
          <div>
            <div class="title-main">Almoxarifado • <span class="pill pill-green">v7.8</span></div>
            <div class="muted small">Controle de itens, solicitações, entregas e usuários</div>
          </div>
        </div>
        <div class="topbar-right">
          <span id="badge-user" class="badge"></span>
          <span id="badge-role" class="badge"></span>
          <button id="btn-logout" class="btn2" type="button">Sair</button>
        </div>
      </header>

      <!-- Abas -->
      <nav class="tabs-bar">
        <button class="tab active" data-t="tab-itens">Itens</button>
        <button class="tab" data-t="tab-cad">Cadastro</button>
        <button class="tab" data-t="tab-sol">Solicitações</button>
        <button class="tab" data-t="tab-almox">Almoxarife</button>
        <button class="tab" data-t="tab-res">Resumo</button>
        <button class="tab" data-t="tab-users">Usuários</button>
      </nav>

      <!-- Conteúdo das abas -->
      <main class="main-area">

        <!-- ========== ABA ITENS ========== -->
        <section id="tab-itens" class="tab-view">
          <div class="section-header">
            <h2>Itens em estoque</h2>
            <div class="search-box">
              <input id="itens-q" class="inp" type="text" placeholder="Buscar por nome, código ou unidade" />
            </div>
          </div>

          <div id="itens-list" class="cards-grid"></div>
          <div id="itens-empty" class="muted center">
            Nenhum item cadastrado ainda.
          </div>
        </section>

        <!-- ========== ABA CADASTRO ========== -->
        <section id="tab-cad" class="tab-view hidden">
          <h2>Cadastro de novo item</h2>
          <p class="muted small">Somente ADMIN / ALMOX podem cadastrar itens.</p>

          <form id="cad-form" class="form-grid">
            <div class="form-group">
              <label for="c-name">Nome do item</label>
              <input id="c-name" name="name" class="inp" type="text" required />
            </div>

            <div class="form-group">
              <label for="c-code">Código</label>
              <input id="c-code" name="code" class="inp" type="text" />
            </div>

            <div class="form-group">
              <label for="c-unit">Unidade</label>
              <input id="c-unit" name="unit" class="inp" type="text" placeholder="ex: CX, UN, PCT..." />
            </div>

            <div class="form-group full">
              <label for="c-img">Imagem do item (opcional)</label>
              <input id="c-img" name="image" class="inp" type="file" accept="image/*" />
            </div>

            <div class="form-actions">
              <button class="btn" type="submit">Salvar item</button>
            </div>
          </form>
        </section>

        <!-- ========== ABA SOLICITAÇÕES ========== -->
     <section id="tab-sol" class="tab-view hidden">
  <div class="section-grid-2">
    <!-- Coluna esquerda: nova solicitação -->
    <div>
      <h2>Nova solicitação</h2>

      <!-- 1) Cabeçalho do pedido -->
      <div class="form-group">
        <label for="s-pedido">Nº do pedido</label>
        <input id="s-pedido" class="inp" type="text" />
      </div>
      <div class="form-group">
        <label for="s-linha">Linha / Obra / Setor</label>
        <input id="s-linha" class="inp" type="text" />
      </div>
      <div class="form-group">
        <label for="s-forn">Fornecedor</label>
        <input id="s-forn" class="inp" type="text" />
      </div>
      <div class="form-group">
        <label for="s-marca">Marca</label>
        <input id="s-marca" class="inp" type="text" />
      </div>

      <hr />

      <!-- 2) Seleção do item / materiais -->
      <div class="form-group">
        <label for="s-item">Item</label>
        <select id="s-item" class="inp"></select>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="s-code">Código</label>
          <input id="s-code" class="inp" type="text" readonly />
        </div>
        <div class="form-group">
          <label for="s-unit">Unidade</label>
          <input id="s-unit" class="inp" type="text" readonly />
        </div>
        <div class="form-group">
          <label for="s-stock">Estoque</label>
          <input id="s-stock" class="inp" type="number" readonly />
        </div>
      </div>

      <div class="form-group">
        <label>Foto do item</label>
        <div id="s-photo" class="muted">Sem foto</div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="s-qt">Quantidade</label>
          <input id="s-qt" class="inp" type="number" min="0" value="0" />
        </div>
        <div class="form-group">
          <label for="s-vu">Valor unitário</label>
          <input id="s-vu" class="inp" type="number" step="0.01" min="0" value="0" />
        </div>
        <div class="form-group">
          <label for="s-total">Total</label>
          <input id="s-total" class="inp" type="text" readonly />
        </div>
      </div>

      <div class="actions-row">
        <button id="s-add" class="btn2" type="button">Adicionar ao pedido</button>
        <button id="s-save" class="btn" type="button">Salvar solicitação</button>
        <button id="s-pdf" class="btn2" type="button">PDF do rascunho</button>
      </div>
    </div>

    <!-- Coluna direita: rascunho e minhas solicitações -->
    <div>
      <h2>Materiais do pedido (rascunho)</h2>
      <div id="s-empty" class="muted">Nenhum material adicionado.</div>
      <div id="s-list" class="cards-column"></div>

      <div class="actions-row top-space">
        <button id="s-pdf-all" class="btn2" type="button">
          PDF - Minhas solicitações
        </button>
      </div>

      <hr />

      <div class="section-header">
        <h3>Minhas solicitações</h3>
        <input id="s-q" class="inp small" type="text" placeholder="Filtrar por pedido, fornecedor, marca..." />
      </div>
      <div id="s-me-empty" class="muted">Você ainda não fez nenhuma solicitação.</div>
      <div id="s-me" class="cards-column"></div>
    </div>
  </div>
</section>


        <!-- ========== ABA ALMOXARIFE ========== -->
        <section id="tab-almox" class="tab-view hidden">
          <div class="section-grid-2">
            <!-- Coluna esquerda: painéis de recebimento -->
            <div>
              <h2>Recebimento / Almoxarife</h2>
              <p class="muted small">
                Atualize quantidades recebidas, datas de entrega e observações.
              </p>
              <div id="a-empty" class="muted">Nenhuma solicitação pendente.</div>
              <div id="a-list" class="cards-column"></div>
            </div>

            <!-- Coluna direita: calendário -->
            <div>
              <h2>Calendário de entregas</h2>
              <div class="calendar">
                <div class="calendar-header">
                  <button id="c-prev" class="btn2" type="button">&lt;</button>
                  <span id="c-title" class="calendar-title"></span>
                  <button id="c-next" class="btn2" type="button">&gt;</button>
                </div>
                <table class="calendar-table">
                  <thead>
                    <tr>
                      <th>Dom</th><th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>Sáb</th>
                    </tr>
                  </thead>
                  <tbody id="c-body"></tbody>
                </table>
              </div>
              <div id="c-day" class="card top-space">
                <span class="muted">Clique em uma data no calendário para ver os pedidos programados.</span>
              </div>
            </div>
          </div>
        </section>

        <!-- ========== ABA RESUMO ========== -->
        <section id="tab-res" class="tab-view hidden">
          <div class="section-header">
            <h2>Resumo de solicitações</h2>
            <input id="r-q" class="inp small" type="text" placeholder="Filtrar por pedido, fornecedor, marca..." />
          </div>

          <div class="summary-grid">
            <div>
              <h3>Pendentes / Parciais</h3>
              <div id="r-pend-empty" class="muted">Nenhuma pendência encontrada.</div>
              <div id="r-pend" class="cards-column"></div>
            </div>
            <div>
              <h3>Concluídas</h3>
              <div id="r-done-empty" class="muted">Nenhuma solicitação concluída ainda.</div>
              <div id="r-done" class="cards-column"></div>
            </div>
          </div>

          <div class="top-space">
            <h3>Totais por item</h3>
            <div id="r-tot" class="totals-box"></div>
          </div>

          <div class="actions-row top-space">
            <button id="r-pdf" class="btn2" type="button">PDF - Resumo geral</button>
          </div>
        </section>

        <!-- ========== ABA USUÁRIOS ========== -->
        <section id="tab-users" class="tab-view hidden">
          <div class="section-grid-2">
            <div>
              <h2>Cadastro de usuários</h2>
              <p class="muted small">Somente ADMIN pode criar, editar e excluir usuários.</p>

              <div class="form-group">
                <label for="u-name">Nome</label>
                <input id="u-name" class="inp" type="text" />
              </div>
              <div class="form-group">
                <label for="u-username">Login</label>
                <input id="u-username" class="inp" type="text" />
              </div>
              <div class="form-group">
                <label for="u-password">Senha</label>
                <input id="u-password" class="inp" type="password" />
              </div>
              <div class="form-group">
                <label for="u-role">Função</label>
                <select id="u-role" class="inp">
                  <option value="ADMIN">ADMIN</option>
                  <option value="ALMOX">ALMOX</option>
                  <option value="SOLICITANTE" selected>SOLICITANTE</option>
                </select>
              </div>

              <div class="actions-row">
                <button id="u-create" class="btn" type="button">Criar usuário</button>
              </div>
            </div>

            <div>
              <h2>Usuários cadastrados</h2>
              <div id="u-empty" class="muted">Nenhum usuário além do administrador padrão.</div>
              <div id="u-list" class="cards-column"></div>
            </div>
          </div>
        </section>

      </main>
    </section>
  </div>

  <!-- JS principal -->
  <script src="app.js"></script>
</body>
</html>
